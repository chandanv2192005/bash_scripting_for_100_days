#!/bin/bash

LIST="${1:-urls.txt}"
LOG="${2:-site_status.log}"
[ -f "$LIST" ] || { echo "Put URLs (one per line) in $LIST"; exit 1; }
: > "$LOG"
while IFS= read -r url; do
 [[ -z "$url" || "$url" =~ ^# ]] && continue
 code=$(curl -s -o /dev/null -w "%{http_code}" -I "$url" || echo "000")
 echo "$(date '+%F %T') $url -> $code" | tee -a "$LOG"
done < "$LIST
